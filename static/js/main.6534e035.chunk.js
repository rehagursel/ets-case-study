(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{12:function(e,t,n){e.exports={header:"MainNavigation_header__pcWBd",logo:"MainNavigation_logo__3mTft",bold:"MainNavigation_bold__134On",lighter:"MainNavigation_lighter__Hf5Q0",nav:"MainNavigation_nav__2KJfX",active:"MainNavigation_active__oN3Ka"}},13:function(e,t,n){e.exports={item:"HotelItem_item__39osi",cover:"HotelItem_cover__1tiAa",infoBox:"HotelItem_infoBox__3FuBJ",hotelName:"HotelItem_hotelName__43LTa",score:"HotelItem_score__1q-Gr",deleteBtn:"HotelItem_deleteBtn__2njJ4"}},14:function(e,t,n){e.exports={form:"NewHotelForm_form__1hjg6",loading:"NewHotelForm_loading__3Ts7w",control:"NewHotelForm_control__1RA6K",actions:"NewHotelForm_actions__2qgvm",warning:"NewHotelForm_warning__3hkEo"}},20:function(e,t,n){e.exports={paginationDiv:"Pagination_paginationDiv__yCnjf",pagination:"Pagination_pagination__1Z03K",pageLink:"Pagination_pageLink__1MeeL"}},23:function(e,t,n){e.exports={list:"HotelsList_list__EoyAZ",sorting:"HotelsList_sorting__1ZcgP",addButton:"HotelsList_addButton__2yGbe"}},24:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1mfF6",modal:"Modal_modal__4DXUe","slide-down":"Modal_slide-down__W3MdX",content:"Modal_content__3zUnK"}},25:function(e,t,n){e.exports={deleteModal:"HotelDeleteModal_deleteModal__riEBa",deleteModalMain:"HotelDeleteModal_deleteModalMain__oTR36",actionButtons:"HotelDeleteModal_actionButtons__1s7Hk"}},34:function(e,t,n){e.exports={increment:"Button_increment__2zaHA",decrement:"Button_decrement__3Omjk",add:"Button_add__1JMLN",addConfirm:"Button_addConfirm__1MPZG",deleteHotelBtn:"Button_deleteHotelBtn__2uLNn",deleteHotelBtnConfirm:"Button_deleteHotelBtnConfirm__3xPre",cancelBtn:"Button_cancelBtn__1lpMD",delete:"Button_delete__2V5ee",quit:"Button_quit__3nqPD"}},37:function(e,t,n){e.exports={noHotel:"NoHotelsFound_noHotel__2S6DK"}},38:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__2Kyqv"}},39:function(e,t,n){e.exports={card:"Card_card__1m44e"}},40:function(e,t,n){e.exports={main:"Layout_main__auk_r"}},53:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(31),a=n.n(c),s=n(9),o=n(5),i=n(16),r=Object(i.b)({name:"sort",initialState:{sortIsScore:!1},reducers:{sort:function(e,t){var n=t.payload;e.sortIsScore=n}}}),l=r.actions,d=r,u=Object(i.b)({name:"list",initialState:{hotelsList:[],deleteHotelName:[]},reducers:{addHotelToList:function(e,t){var n,c=t.payload;e.hotelsList.find((function(e){return e.name===c.name}))||e.hotelsList.push({id:c.name,score:+c.score,name:c.name,src:"https://www.etstur.com/resources_t/img/hotel/default_image.png",editTime:c.editTime,logTime:c.logTime}),null===(n=e.hotelsList)||void 0===n||n.sort((function(e,t){return e.logTime<t.logTime?1:t.logTime<e.logTime?-1:0}))},editHotelAtTheList:function(e,t){var n=t.payload,c=e.hotelsList.find((function(e){return e.name===n.name}));c.score=+n.score,c.editTime=n.editTime},removeHotelFromList:function(e,t){var n=t.payload;e.hotelsList=e.hotelsList.filter((function(e){return e.name!==n}))},saveHotelName:function(e,t){var n=t.payload;e.deleteHotelName=n}}}),j=u.actions,m=u,b=Object(i.a)({reducer:{sort:d.reducer,list:m.reducer}}),O=(n(53),n(4)),h=n(1),f=n.n(h),_=n(3),p=n(22),x=n(34),g=n.n(x),v=n(0),N=function(e){return Object(v.jsx)("button",{className:g.a["".concat(e.className)],type:e.type||"button",onClick:e.onClick,disabled:e.disabled,children:e.children})},T=n(11),y=n(30),H=n(35);function w(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"error"}:e}var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(h.useReducer)(w,{status:t?"pending":null,data:null,error:null}),c=Object(O.a)(n,2),a=c[0],s=c[1],o=Object(h.useCallback)(function(){var t=Object(H.a)(Object(y.a)().mark((function t(n){var c;return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:c=t.sent,s({type:"SUCCESS",responseData:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:"ERROR",errorMessage:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(T.a)({sendRequest:o},a)};function k(){var e=[];return Object.keys(localStorage).forEach((function(t){var n=localStorage.getItem(t);e.unshift(JSON.parse(n))})),e}function C(e){return localStorage.setItem(e.name,JSON.stringify({key:e.name,id:e.name,score:e.score,name:e.name,src:"https://www.etstur.com/resources_t/img/hotel/default_image.png",editTime:e.editTime,logTime:e.logTime})),null}function M(e){if(Object.keys(localStorage).includes(e.name))throw new Error("Bu otel listede mevcut");return localStorage.setItem(e.name,JSON.stringify({key:e.name,id:e.name,score:e.score,name:e.name,src:"https://www.etstur.com/resources_t/img/hotel/default_image.png",editTime:e.editTime,logTime:e.logTime})),null}function B(e){return localStorage.removeItem(e),null}var L=n(13),E=n.n(L),D=function(e){var t=Object(h.useState)(+e.score),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(h.useState)(!1),i=Object(O.a)(s,2),r=i[0],d=i[1],u=Object(o.c)((function(e){return e.sort.sortIsScore})),m=S(C),b=m.sendRequest,f=m.status,_=Object(o.b)(),p=new Date;Object(h.useEffect)((function(){u&&b({name:e.name,score:c,editTime:Date.parse(p),logTime:e.logTime})}),[c]),Object(h.useEffect)((function(){"completed"===f&&_(j.editHotelAtTheList({name:e.name,score:c,editTime:Date.parse(p)}))}),[f,c]);return Object(v.jsx)("li",{className:E.a.item,children:Object(v.jsxs)("div",{onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},className:E.a.cover,children:[Object(v.jsx)("img",{src:e.src,alt:"hotel-cover"}),Object(v.jsxs)("div",{className:E.a.infoBox,children:[Object(v.jsx)("h1",{className:E.a.hotelName,children:e.name}),Object(v.jsxs)("p",{className:E.a.score,children:[c," Puan"]}),Object(v.jsx)(N,{className:"increment",type:"button",onClick:function(){c<10&&a((function(e){return+(e+.1).toFixed(1)})),_(l.sort(!0))},children:"PUAN ARTIR"}),Object(v.jsx)(N,{className:"decrement",type:"button",onClick:function(){c>.1&&a((function(e){return+(e-.1).toFixed(1)})),_(l.sort(!0))},children:"PUAN AZALT"})]}),Object(v.jsx)("div",{className:E.a.deleteBtn,children:r&&Object(v.jsx)(N,{className:"delete",type:"button",onClick:function(){_(j.saveHotelName(e.name)),e.onClick()},children:"\u2715"})})]})})},I=n(20),F=n.n(I),R=function(e){for(var t=e.hotelsPerPage,n=e.totalHotels,c=e.paginate,a=[],s=1;s<=Math.ceil(n/t);s++)a.push(s);return Object(v.jsx)("div",{className:F.a.paginationDiv,children:Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{className:F.a.pagination,children:[Object(v.jsx)("span",{children:Object(v.jsx)("i",{className:"arrow left"})}),a.map((function(e){return Object(v.jsx)("li",{className:F.a.pageItem,children:Object(v.jsx)("button",{className:F.a.pageLink,onClick:function(){return c(e)},children:e})},e)})),Object(v.jsx)("span",{children:Object(v.jsx)("i",{className:"arrow right"})})]})})})},P=n(23),A=n.n(P),q=function(e){var t=e.hotels,n=e.onClick,c=Object(h.useState)(!1),a=Object(O.a)(c,2),i=a[0],r=a[1],d=Object(h.useState)(5),u=Object(O.a)(d,1)[0],j=Object(h.useState)(1),m=Object(O.a)(j,2),b=m[0],_=m[1],p=b*u,x=p-u,g=Object(h.useState)(!1),N=Object(O.a)(g,2),T=N[0],y=N[1],H=Object(o.c)((function(e){return e.sort.sortIsScore})),w=Object(o.b)();var S=t;H&&(S=function(e){return null===e||void 0===e?void 0:e.sort((function(e,t){return e.score>t.score?1:e.score<t.score?-1:e.editTime>t.editTime?1:e.editTime<t.editTime?-1:0}))}(t)),i&&(S=function(e,t){return null===e||void 0===e?void 0:e.sort((function(e,n){return t?+e.score<+n.score?1:-1:+e.score>+n.score?1:-1}))}(t,T));var k=S.slice(x,p);return Object(v.jsxs)(f.a.Fragment,{children:[Object(v.jsxs)("div",{className:A.a.addButton,children:[Object(v.jsx)(s.b,{to:"/new-hotel",className:"addBtn",children:"+"}),Object(v.jsx)("p",{children:"OTEL EKLE"})]}),Object(v.jsx)("div",{className:A.a.sorting,children:Object(v.jsx)("button",{onClick:function(){w(l.sort(!1)),y((function(e){return!e})),r(!0)},children:T?"\u25b2 Puan (Artan)":"\u25bc Puan (Azalan)"})}),Object(v.jsx)("ul",{className:A.a.list,children:k.map((function(e){return Object(v.jsx)(D,{id:e.id,name:e.name,score:+e.score,logTime:e.logTime,src:e.src,onClick:n},e.id)}))}),Object(v.jsx)(R,{hotelsPerPage:u,totalHotels:S.length,paginate:function(e){_(e)}})]})},K=n(37),J=n.n(K),U=function(){return Object(v.jsxs)("div",{className:J.a.noHotel,children:[Object(v.jsx)("p",{children:"Otel listesi bo\u015f!"}),Object(v.jsx)(s.b,{to:"/new-hotel",className:"btn",children:"Yeni Otel Ekle"})]})},Z=n(38),z=n.n(Z),G=function(){return Object(v.jsx)("div",{className:z.a.spinner})},X=function(e){var t=Object(o.c)((function(e){return e.list.hotelsList})),n=Object(o.b)(),c=S(k,!0),a=c.sendRequest,s=c.status,i=c.data;if(Object(h.useEffect)((function(){a()}),[]),Object(h.useEffect)((function(){null===i||void 0===i||i.forEach((function(e){return n(j.addHotelToList(e))}))}),[i]),"pending"===s)return Object(v.jsx)("div",{className:"centered",children:Object(v.jsx)(G,{})});if("completed"===s&&0===i.length)return Object(v.jsx)(U,{});var r=Object(p.a)(t);return Object(v.jsx)(f.a.Fragment,{children:Object(v.jsx)(q,{hotels:r,onClick:e.onShowModal})})},V=n(39),W=n.n(V),Y=function(e){return Object(v.jsx)("div",{className:W.a.card,children:e.children})},Q=f.a.forwardRef((function(e,t){return Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(v.jsx)("input",Object(T.a)(Object(T.a)({required:!0,ref:t},e.input),{},{onChange:e.onChange}))]})})),$=n(14),ee=n.n($),te=function(e){var t=Object(h.useState)(!1),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(h.useRef)(),o=Object(h.useRef)();function i(){a(!1)}if("pending"===e.statusType.status)return Object(v.jsx)("div",{className:"centered",children:Object(v.jsx)(G,{})});var r=Object(v.jsx)(N,{className:"add",type:"submit",onClick:i,children:"EKLE"});return"completed"===e.statusType.status&&(r=Object(v.jsx)(N,{className:"addConfirm",type:"submit",onClick:i,children:"\u2713 EKLEND\u0130"})),Object(v.jsxs)(f.a.Fragment,{children:[Object(v.jsx)(_.a,{when:c,message:"Are you sure, you want to leave? Entered data will be lost!!"}),Object(v.jsx)(Y,{children:Object(v.jsxs)("form",{className:ee.a.form,onSubmit:function(t){t.preventDefault();var n=s.current.value,c=o.current.value,a=new Date;e.onAddHotel({name:n,score:c,logTime:Date.parse(a),editTime:Date.parse(a)})},onFocus:function(){a(!0)},children:["pending"===e.status&&Object(v.jsx)("div",{className:ee.a.loading,children:Object(v.jsx)(G,{})}),Object(v.jsx)("div",{className:ee.a.control,children:Object(v.jsx)(Q,{className:ee.a.control,ref:s,label:"Otel Ad\u0131",input:{htmlFor:"name",id:"name",type:"text"}})}),Object(v.jsx)("div",{className:ee.a.control,children:Object(v.jsx)(Q,{ref:o,label:"Puan",input:{htmlFor:"score",id:"score",type:"number",min:"1",max:"10",step:".1"}})}),r,"error"===e.statusType.status&&Object(v.jsx)("div",{className:ee.a.warning,children:e.statusType.error})]})})]})},ne=function(){var e=S(M),t=e.sendRequest,n=e.status,c=e.error,a=Object(o.b)(),s=Object(_.h)();Object(h.useEffect)((function(){if("completed"===n){var e=setTimeout((function(){s.push("/hotels-list")}),600);return function(){clearTimeout(e)}}}),[n,s]);return Object(v.jsx)(f.a.Fragment,{children:Object(v.jsx)(te,{statusType:{status:n,error:c},onAddHotel:function(e){a(l.sort(!1)),t(e),a(j.addHotelToList(e))}})})},ce=n(12),ae=n.n(ce),se=function(){return Object(v.jsxs)("header",{className:ae.a.header,children:[Object(v.jsxs)("div",{className:ae.a.logo,children:[Object(v.jsx)("span",{className:ae.a.bold,children:"ets"}),Object(v.jsx)("span",{className:ae.a.lighter,children:"tur"})]}),Object(v.jsx)("nav",{className:ae.a.nav,children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(s.c,{to:"/hotels-list",activeClassName:ae.a.active,children:"Oteller"})}),Object(v.jsx)("li",{children:Object(v.jsx)(s.c,{to:"/new-hotel",activeClassName:ae.a.active,children:"Yeni Otel Ekle"})})]})})]})},oe=n(40),ie=n.n(oe),re=function(e){return Object(v.jsxs)(f.a.Fragment,{children:[Object(v.jsx)(se,{}),Object(v.jsx)("main",{className:ie.a.main,children:e.children})]})},le=n(15),de=n.n(le),ue=n(24),je=n.n(ue),me=function(e){return Object(v.jsx)("div",{className:je.a.backdrop,onClick:e.onClick})},be=function(e){return Object(v.jsx)("div",{className:je.a.modal,children:Object(v.jsx)("div",{className:je.a.content,children:e.children})})},Oe=document.getElementById("overlays"),he=function(e){return Object(v.jsxs)(f.a.Fragment,{children:[de.a.createPortal(Object(v.jsx)(me,{onClick:e.onClick}),Oe),de.a.createPortal(Object(v.jsx)(be,{children:e.children}),Oe)]})},fe=n(25),_e=n.n(fe),pe=function(e){var t=Object(o.c)((function(e){return e.list.deleteHotelName})),n=S(B),c=n.sendRequest,a=n.status,s=Object(o.b)();Object(h.useEffect)((function(){if("completed"===a){s(j.removeHotelFromList(t));var n=setTimeout((function(){e.setModalIsShown(!1)}),500);return function(){clearTimeout(n)}}}),[a,t,e.setModalIsShown]);var i=function(){c(t)},r=function(){e.setModalIsShown(!1)},l=Object(v.jsx)(N,{className:"deleteHotelBtn",type:"button",onClick:i,children:"OTEL\u0130 S\u0130L"});return"completed"===a&&(l=Object(v.jsx)(N,{className:"deleteHotelBtnConfirm",type:"button",onClick:i,children:"\u2713 S\u0130L\u0130ND\u0130"})),Object(v.jsxs)(he,{onClick:r,children:[Object(v.jsx)("div",{className:_e.a.deleteModal,children:Object(v.jsxs)("div",{className:_e.a.deleteModalMain,children:[Object(v.jsx)("h1",{children:"Oteli Sil"}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{children:t}),"'i silmek istedi\u011finizden emin misiniz?"]}),Object(v.jsxs)("div",{className:_e.a.actionButtons,children:[l,Object(v.jsx)(N,{className:"cancelBtn",type:"button",onClick:r,children:"VAZGE\xc7"})]})]})}),Object(v.jsx)(N,{className:"quit",type:"button",onClick:r,children:"\u2715"})]})};var xe=function(){var e=Object(h.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(_.h)();return Object(h.useEffect)((function(){a.push("/hotels-list")}),[a]),Object(v.jsx)(re,{children:Object(v.jsx)(h.Suspense,{children:Object(v.jsxs)(_.e,{children:[Object(v.jsx)(_.c,{path:"/",exact:!0,children:Object(v.jsx)(_.b,{to:"/hotels-list"})}),n&&Object(v.jsx)(pe,{modalIsShown:n,setModalIsShown:c}),Object(v.jsx)(_.c,{path:"/hotels-list",exact:!0,children:Object(v.jsx)(X,{onShowModal:function(){c(!0)}})}),Object(v.jsx)(_.c,{path:"/new-hotel",children:Object(v.jsx)(ne,{})})]})})})};a.a.createRoot(document.getElementById("root")).render(Object(v.jsx)(s.a,{children:Object(v.jsx)(o.a,{store:b,children:Object(v.jsx)(xe,{})})}))}},[[60,1,2]]]);
//# sourceMappingURL=main.6534e035.chunk.js.map